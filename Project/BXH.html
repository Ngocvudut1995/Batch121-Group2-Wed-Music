<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta content="text"property="og:title">
    <title>Bảng Xếp Hạng</title>
    <link rel="Shortcut Icon" href="images/Logo/favicon%20(4).ico" type="image/x-icon" />
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="css/bootstrap-theme.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- jQuery library -->
    <script src="js/jquery-2.1.4.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="js/bootstrap.js"></script>
    <script src="data/productsBXH.js"></script>
    <script src="js/facebook.js"></script>
    <script src="js/sweetalert.min.js"></script>
    <script src="data/user.js"></script>
    <script src="data/bxhhanquoc.js"></script>
    <script src="data/playlist.js"></script>

    <link rel="stylesheet" href="css/sweetalert.css">
    <script src="js/sweetalert.min.js"></script>

    <link rel="stylesheet" href="social-button/social-buttons.css">
</head>
<body data-spy="scroll" data-target=".navbar" data-offset="50">

<header id="myheader">


</header>
<nav id="mynav"data-spy="affix" data-offset-top="130">


</nav>
<div class="container">

    <div class="row" style="margin-top: 20px;">
        <div class="col-lg-8 " style="">

            <div  class="hidden-xs"style="height: 50px; margin-top: 15px">
                <ul class="nav nav-pills">

                    <li class="active"><a data-toggle="pill" href="#bxhvn">Việt Nam</a></li>
                    <li><a data-toggle="pill" href="#bxhhq">Hàn Quốc</a></li>
                    <li><a data-toggle="pill" href="#bxhaumy">Âu Mỹ</a></li>
                </ul>
            </div>
            <div class="tab-content">
                <div  class="tab-pane fade in active"id="bxhvn">
                    <div class="" style="height: 60px; margin-top: 15px;">
                        <div class=""><h3  style=" float:left;">Bảng Xếp Hạng Bài Hát Việt Nam</h3></div>
                        <div class="btn-group hidden-xs" style="float: right; margin-top: 10px">
                            <a  class="btn btn-danger">Bài Hát</a>
                            <a  class="btn btn-default">Album</a>
                            <a  class="btn btn-default">Video</a>
                        </div>
                    </div>
                    <div class="cow" style="height: 50px;">
                        <div class=" col-md-8 col-xs-6 form-group">

                            <select class="form-control" id="sel1" style="float: left;width:100%">
                                <option>Tuần 4 Tháng 10</option>
                                <option>Tuần 3 Tháng 10</option>
                                <option>Tuần 2 Tháng 10</option>
                                <option>Tuần 1 Tháng 10</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-xs-5">
                            <a style="float:right;margin-top: 10px;" href="playlist-BXHbhvn.html"><span class="glyphicon glyphicon-expand"></span> Nghe Toàn Bộ</a>
                        </div>

                    </div>
                    <div style="background-color: rgba(158, 155, 156, 0.79);">
                        <ul id="BXH" class="list-group" style="list-style-type: none">



                        </ul>
                    </div>

                </div>
                <div  class="tab-pane fade"id="bxhhq">
                    <div class="" style="height: 60px; margin-top: 15px;">
                        <div class=""><h3  style=" float:left;">Bảng Xếp Hạng Bài Hát Hàn Quốc</h3></div>
                        <div class="btn-group hidden-xs" style="float: right; margin-top: 10px">
                            <a  class="btn btn-danger">Bài Hát</a>
                            <a  class="btn btn-default">Album</a>
                            <a  class="btn btn-default">Video</a>
                        </div>
                    </div>
                    <div class="cow" style="height: 50px;">
                        <div class=" col-md-8 col-xs-6 form-group">

                            <select class="form-control" id="sel2" style="float: left;width:100%">
                                <option>Tuần 4 Tháng 10</option>
                                <option></option>
                                <option>3</option>
                                <option>4</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-xs-5">
                            <a style="float:right;margin-top: 10px;" href="playlist-BXHbhhp.html"><span class="glyphicon glyphicon-expand"></span> Nghe Toàn Bộ</a>
                        </div>

                    </div>
                    <div style="background-color: rgba(158, 155, 156, 0.79);">
                        <ul id="BXH-hanquoc" class="list-group" style="list-style-type: none">



                        </ul>
                    </div>

                </div>
                <div  class="tab-pane fade"id="bxhaumy">
                    <div class="" style="height: 60px; margin-top: 15px;">
                        <div class=""><h3  style=" float:left;">Bảng Xếp Hạng Bài Hát Âu Mỹ</h3></div>
                        <div class="btn-group hidden-xs" style="float: right; margin-top: 10px">
                            <a  class="btn btn-danger">Bài Hát</a>
                            <a  class="btn btn-default">Album</a>
                            <a  class="btn btn-default">Video</a>
                        </div>
                    </div>
                    <div class="cow" style="height: 50px;">
                        <div class=" col-md-8 col-xs-6 form-group">

                            <select class="form-control" id="sel3" style="float: left;width:100%">
                                <option>Tuần 4 Tháng 10</option>
                                <option></option>
                                <option>3</option>
                                <option>4</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-xs-5">
                            <a style="float:right;margin-top: 10px;" href="playlist-BXHbhaumy.html"><span class="glyphicon glyphicon-expand"></span> Nghe Toàn Bộ</a>
                        </div>

                    </div>
                    <div style="background-color: rgba(158, 155, 156, 0.79);">
                        <ul id="BXH-aumy" class="list-group" style="list-style-type: none">



                        </ul>
                    </div>

                </div>
            </div>

        </div>
        <div class="col-lg-4 hidden-xs">
            <div  id ="BXHbaihat"style=""></div>
            <div  id ="BXHvideo" style=""></div>
         </div>
    </div>
</div>
<footer id="myfooter"></footer>
<script >
    var playlistofUser =[];
    var playlistafter=[];
    var playlistbefore=[];
    $(document).ready(function(){
        $("#myheader").load("templates/header.html");
        $("#mynav").load("templates/nav.html");
        $("#BXHbaihat").load("templates/BXH/baihat.html");
        $("#BXHvideo").load("templates/BXH/video.html");
        $("#myfooter").load("templates/footer.html");
    });
    $(document).ready(function() {
        if (localStorage["play-list-of-User"] != null) {
            playlistofUser = JSON.parse(localStorage["play-list-of-User"]);
        }
        loadProducts(); loadProducts2();loadProducts3();

    });
    function loadProducts() {
        var html = "";
        var t = 1;
        // vòng lặp: duyệt qua từng phần tử trong mảng products
        $.each(playlist, function (index, val) {
            var s = "";
            var d=0;
            s += ' <li class="list-group-item ">';

            s += '         <div class="col-md-7 col-xs-7" style="height: 90px;margin-left: 0px">';
            s += '         <span class="sodb"style="margin-left: -5px;text-align: center;margin-right: 30px;position: absolute">' + t + '</span>';
            s += '         <a style="float: left;position: absolute;margin-left: 20px;" href="' + val.url + '"><img src="' + val.hinhnen + '"></a>';
            s += '         <table style="float: left;margin-left: 130px;margin-top: 10px;position: absolute;">';
            s += '                 <tr>';
            s += '                      <td class="namesong"><a href="' + val.detail + '">' + val.tenbaihat + '</a></td>';
            s += '                 <tr>';
            s += '                      <td class="namesong"><a href="#">' + val.trinhbay + '</a></td>';
            s += '                 <tr>';
            s += '                      <td><h6><span class="glyphicon glyphicon-headphones"></span>' + val.luotnghe + '</h6></td>';
            s += '         </tr>';
            s += '        </table>';
            s += '    </div>';
            s += '    <div class="col-md-5 col-xs-5"style=" margin-top: 30px;float: right;">'

            s += '            <a href="' + val.url + '" download><span class="glyphicon glyphicon-download-alt"style="float: right;margin-left: 20px"></span></a>'
            $.each(playlistofUser, function (index2, item) {
                if (val.id == item.id) {
                    s += '        <a class="addmylist" id="' + val.id + '" href="#add" title="Bạn đã thích bài hát này" data-name="' + val.tenbaihat + '" data-src="' + val.hinhanh + '" data-singer="' + val.trinhbay + '" data-url="' + val.url + '" data-verse="' + val.verse + '" ><span class="glyphicon glyphicon-heart"style="float: right;margin-left: 20px;color: red;"></span></a>'
                    d = 1;
                    return false;
                }

            });
            if (d == 0) {
                s += '        <a class="addmylist" id="' + val.id + '" href="#add" title="Thêm vào playlist của bạn" data-name="' + val.tenbaihat + '" data-src="' + val.hinhanh + '" data-singer="' + val.trinhbay + '" data-url="' + val.url + '" data-verse="' + val.verse + '" ><span class="glyphicon glyphicon-heart"style="float: right;margin-left: 20px;color: #000000;"></span></a>'
            }
            s += '    </div>'
            s += '</li>';


            t++;
            html += s;
        });

        // Bỏ chuỗi html vào bên trong thẻ divProducts
        $("#BXH").html(html);
    }
    function loadProducts2() {
        var html = "";
        var t = 1;
        // vòng lặp: duyệt qua từng phần tử trong mảng products
        $.each(bxhhanquoc, function (index, val) {
            var s = "";
            var d=0;
            s += ' <li class="list-group-item ">';

            s += '         <div class="col-md-7 col-xs-7" style="height: 90px;margin-left: 0px">';
            s += '         <span class="sodb"style="margin-left: -5px;text-align: center;margin-right: 30px;position: absolute">' + t + '</span>';
            s += '         <a style="float: left;position: absolute;margin-left: 20px;" href="' + val.url + '"><img src="' + val.hinhnen + '"></a>';
            s += '         <table style="float: left;margin-left: 130px;margin-top: 10px;position: absolute;">';
            s += '                 <tr>';
            s += '                      <td class="namesong"><a href="' + val.detail + '">' + val.tenbaihat + '</a></td>';
            s += '                 <tr>';
            s += '                      <td class="namesong"><a href="#">' + val.trinhbay + '</a></td>';
            s += '                 <tr>';
            s += '                      <td><h6><span class="glyphicon glyphicon-headphones"></span>' + val.luotnghe + '</h6></td>';
            s += '         </tr>';
            s += '        </table>';
            s += '    </div>';
            s += '    <div class="col-md-4 col-xs-5"style=" margin-top: 30px;float: right;">'

            s += '            <a href="' + val.url + '"download><span class="glyphicon glyphicon-download-alt"style="float: right;margin-left: 20px"></span></a>'
            $.each(playlistofUser, function (index2, item) {
                if (val.id == item.id) {
                    s += '        <a class="addmylist" id="' + val.id + '" href="#add" title="Bạn đã thích bài hát này" data-name="' + val.tenbaihat + '" data-src="' + val.hinhanh + '" data-singer="' + val.trinhbay + '" data-url="' + val.url + '" data-verse="' + val.verse + '" ><span class="glyphicon glyphicon-heart"style="float: right;margin-left: 20px;color: red;"></span></a>'
                    d = 1;
                    return false;
                }

            });
            if (d == 0) {
                s += '        <a class="addmylist" id="' + val.id + '" href="#add" title="Thêm vào playlist của bạn" data-name="' + val.tenbaihat + '" data-src="' + val.hinhanh + '" data-singer="' + val.trinhbay + '" data-url="' + val.url + '" data-verse="' + val.verse + '" ><span class="glyphicon glyphicon-heart"style="float: right;margin-left: 20px;color: #000000;"></span></a>'
            }
            s += '    </div>'
            s += '</li>';


            t++;
            html += s;
        });

        // Bỏ chuỗi html vào bên trong thẻ divProducts
        $("#BXH-hanquoc").html(html);
    }
    function loadProducts3() {
        var html = "";
        var t = 1;
        // vòng lặp: duyệt qua từng phần tử trong mảng products
        $.each(bxhaumy, function (index, val) {
            var s = "";
            var d=0;
            s += ' <li class="list-group-item ">';

            s += '         <div class="col-md-7 col-xs-7" style="height: 90px;margin-left: 0px">';
            s += '         <span class="sodb"style="margin-left: -5px;text-align: center;margin-right: 30px;position: absolute">' + t + '</span>';
            s += '         <a style="float: left;position: absolute;margin-left: 20px;" href="' + val.url + '"><img src="' + val.hinhnen + '"></a>';
            s += '         <table style="float: left;margin-left: 130px;margin-top: 10px;position: absolute;">';
            s += '                 <tr>';
            s += '                      <td class="namesong"><a href="' + val.detail + '">' + val.tenbaihat + '</a></td>';
            s += '                 <tr>';
            s += '                      <td class="namesong"><a href="#">' + val.trinhbay + '</a></td>';
            s += '                 <tr>';
            s += '                      <td><h6><span class="glyphicon glyphicon-headphones"></span>' + val.luotnghe + '</h6></td>';
            s += '         </tr>';
            s += '        </table>';
            s += '    </div>';
            s += '    <div class="col-md-4 col-xs-5"style=" margin-top: 30px;float: right;">'

            s += '            <a href="' + val.url + '"download><span class="glyphicon glyphicon-download-alt"style="float: right;margin-left: 20px"></span></a>'
            $.each(playlistofUser, function (index2, item) {
                if (val.id == item.id) {
                    s += '        <a class="addmylist" id="' + val.id + '" href="#add" title="Bạn đã thích bài hát này" data-name="' + val.tenbaihat + '" data-src="' + val.hinhanh + '" data-singer="' + val.trinhbay + '" data-url="' + val.url + '" data-verse="' + val.verse + '" ><span class="glyphicon glyphicon-heart"style="float: right;margin-left: 20px;color: red;"></span></a>'
                    d = 1;
                    return false;
                }

            });
            if (d == 0) {
                s += '        <a class="addmylist" id="' + val.id + '" href="#add" title="Thêm vào playlist của bạn" data-name="' + val.tenbaihat + '" data-src="' + val.hinhanh + '" data-singer="' + val.trinhbay + '" data-url="' + val.url + '" data-verse="' + val.verse + '" ><span class="glyphicon glyphicon-heart"style="float: right;margin-left: 20px;color: #000000;"></span></a>'
            }
            s += '    </div>'
            s += '</li>';


            t++;
            html += s;
        });

        // Bỏ chuỗi html vào bên trong thẻ divProducts
        $("#BXH-aumy").html(html);
    }
    $(document).ready(function () {

        $("#BXH-hanquoc > li").bind('mouseenter', function () {
            $(this).css('background-color', '#C8C8C8');


        }).bind('mouseleave', function () {
            $(this).css('background-color', 'white');

        });
    });
    $(document).ready(function () {

        $("#BXH-aumy > li").bind('mouseenter', function () {
            $(this).css('background-color', '#C8C8C8');


        }).bind('mouseleave', function () {
            $(this).css('background-color', 'white');

        });
    });
    $(document).ready(function () {

            $("#BXH > li").bind('mouseenter', function () {
                $(this).css('background-color', '#C8C8C8');


            }).bind('mouseleave', function () {
                $(this).css('background-color', 'white');

            });
        });

</script>
<script>
$(document).ready(function(){

    $(".addmylist").click(function(){
        if(localStorage["username"].length>=4&&localStorage["username"]!=null) {
            var button = $(this);
            var id = button.attr("id");
            var namesong = button.attr("data-name");
            var singer = button.attr('data-singer');
            var url = button.attr('data-url');
            var hinhanh = button.attr('data-src');
            var verse = button.attr('data-verse');
            var item = {
                id: id,
                tenbaihat: namesong,
                trinhbay: singer,
                url: url,
                hinhanh: hinhanh,
                verse: verse
            };
            var exists = false;
            if (playlistofUser.length > 0) {
                $.each(playlistofUser, function (index, value) {
                    // Nếu mặt hàng đã tồn tại
                    var t = index;

                    //   var i=t;
                    if (value.id == item.id) {
                        // playlistbefore=playlistofUser.slice(0,t);
                        //     playlistafter=playlistofUser.slice(t+1,playlistofUser.length);
                        //      playlistofUser=playlistbefore.concat(playlistafter);

                        //ham splice xoa phan tu index +1, 1 phan tu sau pt index +1
                        playlistofUser = playlistofUser.splice(index + 1, 1);


                        swal("Thông báo", "Bạn Đã Hủy Thêm Bài Hát Này.", "success");

                        exists = true;
                        return false;
                    }
                });
                $(this).find('span').css('color', '#646464');
            }
            if (exists == false) {
                playlistofUser.push(item);
                swal("Thông báo", "Bạn Đã Thêm Thành Công", "success");

                $(this).find('span').css('color', 'red');

            }


            localStorage["play-list-of-User"] = JSON.stringify(playlistofUser);
        }
        else  swal("Thông báo", "Bạn Phải Đăng Nhập Mới Sử Dụng Chức Năng Này", "error");
    });
});


</script>
<script>

    if(localStorage['username']!=null)
        var username=localStorage.getItem('username');
</script>
</body>
</html>